1. 已经梳理了大部分库函数的使用方法
2. 目前能实现执行shell命令
3. 在连接同一个通道的情况下，不能执行使用库函数执行多个shell命令
   目前就是建立连接  执行命令  断开连接 循环使用。我看了看源码，似乎现在只能这样用
```c++
int
_libssh2_channel_process_startup(LIBSSH2_CHANNEL *channel,
                                 const char *request, size_t request_len,
                                 const char *message, size_t message_len)
{
    LIBSSH2_SESSION *session = channel->session;
    unsigned char *s;
    static const unsigned char reply_codes[3] =
        { SSH_MSG_CHANNEL_SUCCESS, SSH_MSG_CHANNEL_FAILURE, 0 };
    int rc;

    if(channel->process_state == libssh2_NB_state_end)  //如果一个通道再一次发送shell命令，会在此处return
    {
        return _libssh2_error(session, LIBSSH2_ERROR_BAD_USE,"Channel can not be reused");
    }
```

4. 下一步是研究上传文件的操作


5. 2022/7/24  今天完成了ssh连接、执行shell命令、上传文件的封装
    
    下一步是测试，(1)测试常用命令返回结果是否正常
                  (2)上传到linux下其他目录是否有问题，看看有没有权限问题
                  
    顺便研究一下，ssh身份验证的几种方式





6. 2022/7/30  目前公司上的开发任务也完成了，我自己也做了一个简单的demo方便以后修改
   还剩下最后几个问题需要研究的  
   
7. 现在执行命令都是连接ssh 执行 断开ssh 的流程，导致每次执行都需要切换linux文件目录，这样很烦，需要研究如何能在不断开连接的情况下持续的执行命令。
   https://blog.csdn.net/wyc6668205/article/details/9179197  参考这个博客，发现还是有方法的正在突破，目前可以接收到终端的那种信息，但是还不能确定命令执行完的标志

    ```shell
    CLS_SshManager::SetServerIp   47  [设置远端服务器ip]  "192.168.226.131"
    CLS_SshManager::SetServerPort   53  [设置远端服务器端口]  "22"
    CLS_SshManager::SetUserName   59  [设置远端服务器用户名]  "lzq"
    CLS_SshManager::SetPasswd   65  [设置远端服务器密码]  "1111"
    CLS_SshManager::SetShellCommand   71  [即将执行的脚本]  "date"
    libssh2_channel_request_pty exec ok
    libssh2_channel_shell exec ok
    CLS_SshManager::ExecCommand   344  ret =  70  [执行结果] Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.13.0-52-generic x86_64)

    |
    CLS_SshManager::ExecCommand   344  ret =  429  [执行结果]  * Documentation:  https://help.ubuntu.com
    * Management:     https://landscape.canonical.com
    * Support:        https://ubuntu.com/advantage

    123 updates can be applied immediately.
    45 of these updates are standard security updates.
    To see these additional updates run: apt list --upgradable

    Your Hardware Enablement Stack (HWE) is supported until April 2025.
    Last login: Sun Aug  7 17:45:34 2022 from 192.168.226.1
    |
    CLS_SshManager::ExecCommand   344  ret =  6  [执行结果] date
    |
    CLS_SshManager::ExecCommand   344  ret =  17  [执行结果] lzq@lzq:~$ date
    |
    CLS_SshManager::ExecCommand   344  ret =  44  [执行结果] 2022年 08月 07日 星期日 18:01:45 CST
    |
    CLS_SshManager::ExecCommand   344  ret =  11  [执行结果] lzq@lzq:~$  |
    [即将退出] "lzq@lzq:~$ " 
    ```
8. 2022-8-8 今天又有突破，发现需要设置一个通道清理的操作，目前的结果如下,发现当linux执行完命令最后输出的一定是lzq@lzq:~$，这样可以通过匹配来判断一个命令是否完成，另外发现这个通道将客户端和服务端所有的输入都输出了，下面的文本中既有客户端也有服务端
    ```
    CLS_SshManager::SetServerIp   47  [设置远端服务器ip]  "192.168.226.131"
    CLS_SshManager::SetServerPort   53  [设置远端服务器端口]  "22"
    CLS_SshManager::SetUserName   59  [设置远端服务器用户名]  "lzq"
    CLS_SshManager::SetPasswd   65  [设置远端服务器密码]  "1111"
    CLS_SshManager::SetShellCommand   71  [即将执行的脚本]  "date"
    libssh2_channel_request_pty exec ok
    libssh2_channel_shell exec ok
    libssh2_channel_flush exec ok
    ===============================================================================

    libssh2_channel_flush exec ok
    [RET]Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.13.0-52-generic x86_64)     //服务端

    * Documentation:  https://help.ubuntu.com
    * Management:     https://landscape.canonical.com
    * Support:        https://ubuntu.com/advantage

    78 updates can be applied immediately.
    To see these additional updates run: apt list --upgradable

    Your Hardware Enablement Stack (HWE) is supported until April 2025.
    *** System restart required ***
    Last login: Mon Aug  8 17:11:18 2022 from 192.168.226.1


    ===============================================================================

    libssh2_channel_flush exec ok
    [RET]date   //客户端


    ===============================================================================

    libssh2_channel_flush exec ok
    [RET]lzq@lzq:~$ date  //服务端


    ===============================================================================

    libssh2_channel_flush exec ok
    [RET]2022年 08月 08日 星期一 17:14:01 CST //服务端


    ===============================================================================

    libssh2_channel_flush exec ok
    [RET]lzq@lzq:~$   //服务端

    ===============================================================================

    libssh2_channel_flush exec ok
    ```

2. 用户名、密码的登陆方式是不安全，使用秘钥登陆可以研究一下