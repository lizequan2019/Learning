<!DOCTYPE html>
<html>
<head>
    
<meta charset="utf-8">

<title>C++内存管理</title>

<style type="text/css">
    p{
    text-indent: 2em; /*em是相对单位,2em即现在一个字大小的两倍*/
    }
 </style>

</head>
<body>
 
<p>一个C/C++编译的程序所占用的系统内存一般分为BBS段、数据段、代码段、堆和栈</p>

<p>符号起始的区块(Block Started by Symbol,BSS)段 : <b>BSS段通常是指用来存放程序中未初始化的全局数据和静态数据的一块内存区域。</b>BSS段属于静态内存分配,程序结束后静态变量资源由系统自动释放。</p>

<p>数据段(Data Segment) : <b>数据段通常是指用来存放程序中已初始化的全局变量的一块内存区域。</b>数据段也属于静态内存分配,因此,BBS段与数据段都属于静态区(全局区)。</p>

<p>代码段(Code Segment/Text Segment) : 代码段有时也叫文本段,通常是指用来存放程序执行代码(包括类成员函数和全局函数以及其他函数代码)的一块内存区域,这部分区域的大小在程序运行前就已经确定,并且内存区域通常是只读,某些架构也允许代码段为可写,即允许修改程序。在代码段中,也有可能包含一些只读的常数变量,如字符串常量。这个段一般是可以被共享的,如在Linux操作系统中打开了两个vi来编辑文本,那么一般来说,这两个vi是共享一个代码段的。</p>

<p>堆(Heap) : <b>堆是用于存放进程运行中被动态分配的内存段,其大小并不固定,可动态扩张或缩减。</b>当进程调用malloc或new等函数分配内存时,新分配的内存就被动态添加到堆上(堆被扩张),当利用free或delete等函数释放内存时,被释放的内存从堆中被删除(堆被缩减)。堆一般由程序员分配释放,如果程序员自己不释放,在程序结束时,该块内存空间可能会由操作系统回收。需要注意的是,它与数据结构中的堆是两回事,其分配方式类似于链表</p>

<p>栈(Stack) : 栈上存放的是用户临时创建的局部变量,一般包括函数括弧“{}”中定义的变量(但不包括static声明的变量,static意味着在数据段中存放变量)。除此之外,在函数被调用时,其参数也会被压入发起调用的进程栈中,并且等到调用结束后,函数的返回值也会被存放回栈中。栈由编译器自动分配释放,存放函数的参数值、局部变量的值等。其操作方式类似于数据结构中的栈。栈内存分配运算内置于处理器的指令集中,一般使用寄存器来存取,效率很高,但分配的内存容量有限。</p>

 
</body>
</html>

