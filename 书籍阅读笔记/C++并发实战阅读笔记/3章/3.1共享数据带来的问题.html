<!DOCTYPE html>
<html>
<head>
    
<meta charset="utf-8">

<title>C++多线程-第三章-3.1-共享数据带来的问题</title>

<style type="text/css">
    p{
    text-indent: 2em; /*em是相对单位,2em即现在一个字大小的两倍*/
    }
 </style>

</head>
<body>
 
<h2>3.1共享数据带来的问题</h2>

<p>一个进程中多个线程共同使用一个资源,如果都是读取共享资源,那么相安无事,当出现修改共享资源的情况就会出现问题。</p>

<p>书中提到了一个<b>不变量</b>的概念,对编写程序会有一定的帮助——对于特殊结构体的描述;比如,"变量包含列表中的项数"。不变量通常会在一次更新中被破坏,特别是比较复杂的数据结构(比如双向链表),或者一次更新就要改动很大的数据结构。</p>

<p>我举个例子说明,比如桥是公共资源(一种复杂的数据结构),施工队(对桥进行维修)和汽车(需要行驶过桥)是两个线程,当施工队对桥进行维修的时候,此时汽车也要行驶过桥,这就会发生问题,桥的路面在维修时是处于被破坏状态,此时对汽车线程来说桥的不变量已经被破坏。</p>

<h3>3.1.1竞争条件(Race conditions)</h3>

<p><font color="#ff0000">竞争条件的定义</font> : <b>在并发中,结果取决于两个或多个线程操作的执行顺序</b>,把两个人比作两个线程,A负责往冰箱中放置食物,B负责吃掉食物,此时执行结果取决于两个人的操作顺序。如果A先执行,B再执行,那么结果是正常的,冰箱中的食物会被吃掉,如果A、B操作互换,那么冰箱中的食物不会被吃掉。</p>  

<p>竞争条件分为<b>良性</b>和<b>恶性</b>的,良性是指虽然线程执行顺序会更改结果,但是无论哪种结果都是我们可以接受的(比如,两个线程同时向队列中添加数据,谁先谁后都没有关系)。恶性就是指当执行顺序改变导致的结果是我们不能够接受的。</p>
 
</body>
</html>